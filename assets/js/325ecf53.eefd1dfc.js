"use strict";(self.webpackChunkultimatehomeserver_com=self.webpackChunkultimatehomeserver_com||[]).push([[45],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>g});var a=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=a.createContext({}),u=function(e){var t=a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},c=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=u(r),m=n,g=d["".concat(l,".").concat(m)]||d[m]||p[m]||o;return r?a.createElement(g,s(s({ref:t},c),{},{components:r})):a.createElement(g,s({ref:t},c))}));function g(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,s=new Array(o);s[0]=m;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[d]="string"==typeof e?e:n,s[1]=i;for(var u=2;u<o;u++)s[u]=r[u];return a.createElement.apply(null,s)}return a.createElement.apply(null,r)}m.displayName="MDXCreateElement"},2904:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>u});var a=r(7462),n=(r(7294),r(3905));const o={sidebar_position:1},s="Getting Started",i={unversionedId:"getting-started/getting-started",id:"getting-started/getting-started",title:"Getting Started",description:"Prerequisites",source:"@site/docs/getting-started/getting-started.mdx",sourceDirName:"getting-started",slug:"/getting-started/",permalink:"/docs/getting-started/",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/getting-started/getting-started.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Getting Started",permalink:"/docs/category/getting-started"},next:{title:"Configure SSL",permalink:"/docs/getting-started/ssl"}},l={},u=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Recommended Hardware (<em>to run all services</em>)",id:"recommended-hardware-to-run-all-services",level:3},{value:"Setup your server",id:"setup-your-server",level:2},{value:"RAID storage",id:"raid-storage",level:3},{value:"Install K3s",id:"install-k3s",level:3},{value:"Install Helm",id:"install-helm",level:3},{value:"Clone this repository",id:"clone-this-repository",level:3},{value:"Configure a domain name",id:"configure-a-domain-name",level:2},{value:"Configure SSL",id:"configure-ssl",level:2},{value:"Configure Services",id:"configure-services",level:2},{value:"Deploy Services",id:"deploy-services",level:2},{value:"Verify Services",id:"verify-services",level:2},{value:"Update Services",id:"update-services",level:2}],c={toc:u},d="wrapper";function p(e){let{components:t,...o}=e;return(0,n.kt)(d,(0,a.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"getting-started"},"Getting Started"),(0,n.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Ubuntu 20.04 (or newer) server"),(0,n.kt)("li",{parentName:"ul"},"A domain name"),(0,n.kt)("li",{parentName:"ul"},"Basic knowledge of Linux commands")),(0,n.kt)("h3",{id:"recommended-hardware-to-run-all-services"},"Recommended Hardware (",(0,n.kt)("em",{parentName:"h3"},"to run all services"),")"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"CPU"),": 8+ cores"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"RAM"),": 32+ GB")),(0,n.kt)("p",null,"Running only a few services should work on a ",(0,n.kt)("em",{parentName:"p"},"Raspberry Pi 4")," with 4 GB of RAM."),(0,n.kt)("h2",{id:"setup-your-server"},"Setup your server"),(0,n.kt)("p",null,"In a freshly installed Ubuntu 20.04 (or newer) server, begin by ensuring your system is up to date:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"sudo apt update && sudo apt upgrade -y\n")),(0,n.kt)("p",null,"Install some useful tools:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"sudo apt install -y curl git gettext-base nano \n")),(0,n.kt)("h3",{id:"raid-storage"},"RAID storage"),(0,n.kt)("p",null,"If you plan on using local storage and configuring a RAID array, you may want to do this now. We recommend using ZFS to create a RAIDZ1 array 3+ disks (at least, RAIDZ2 preferred). See ",(0,n.kt)("a",{parentName:"p",href:"https://ubuntu.com/tutorials/setup-zfs-storage-pool#1-overview"},"this guide"),"."),(0,n.kt)("h3",{id:"install-k3s"},"Install K3s"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://k3s.io/"},"k3s")," is a lightweight Kubernetes distribution. It's a great choice for our home server because it has a small resource footprint, supports single-node clusters, and supports mounting a local path as a persistent volume."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curl -sfL https://get.k3s.io | sh -\n")),(0,n.kt)("h3",{id:"install-helm"},"Install Helm"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://helm.sh/"},"Helm")," is a package manager for Kubernetes. It allows us to easily install and manage applications on our cluster."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"chmod 700 get_helm.sh\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"./get_helm.sh\n")),(0,n.kt)("h3",{id:"clone-this-repository"},"Clone this repository"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/TechSquidTV/UltimateHomeServer /opt/homeserver\n")),(0,n.kt)("h2",{id:"configure-a-domain-name"},"Configure a domain name"),(0,n.kt)("p",null,"We will use a domain to access our server locally with a valid SSL certificate."),(0,n.kt)("p",null,"Before we begin, we will need to know the local IP address of our server. We can find this by running:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"ip addr\n")),(0,n.kt)("p",null,"You should configure your router to assign a static IP address to your server if you have not already."),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Once you have your server's IP address, you can configure a domain name. You can obtain a domain name from a registrar of your choice."),(0,n.kt)("li",{parentName:"ol"},"In the DNS settings for your domain, create an ",(0,n.kt)("inlineCode",{parentName:"li"},"A")," record that points to your server's IP address."),(0,n.kt)("li",{parentName:"ol"},"Create a second ",(0,n.kt)("inlineCode",{parentName:"li"},"A")," record that points to your server's IP address, but with a subdomain of ",(0,n.kt)("inlineCode",{parentName:"li"},"*."),", this will be used for wildcard subdomains.")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"DNS Settings",src:r(8588).Z,width:"1408",height:"224"})),(0,n.kt)("h2",{id:"configure-ssl"},"Configure SSL"),(0,n.kt)("p",null,"Read the ",(0,n.kt)("a",{parentName:"p",href:"ssl"},"SSL")," guide for instructions on how to configure SSL for your domain using certbot. This step is ",(0,n.kt)("em",{parentName:"p"},"required"),"."),(0,n.kt)("h2",{id:"configure-services"},"Configure Services"),(0,n.kt)("p",null,"Read the ",(0,n.kt)("a",{parentName:"p",href:"configure"},"Configure")," guide for instructions on how to customize the services you want to deploy."),(0,n.kt)("h2",{id:"deploy-services"},"Deploy Services"),(0,n.kt)("p",null,"Once you have configured your server, domain with ssl, and customized the services you want to deploy, you can create the helm deployment."),(0,n.kt)("p",null,"To make it easier to load your environment variables from the ",(0,n.kt)("inlineCode",{parentName:"p"},".env")," file, the deployment and update commands have been wrapped in scripts. You can run the deployment script with:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"./bin/deploy.sh <your domain>\n")),(0,n.kt)("h2",{id:"verify-services"},"Verify Services"),(0,n.kt)("p",null,"Read the ",(0,n.kt)("a",{parentName:"p",href:"/docs/troubleshooting"},"Troubleshooting")," guide for instructions on how to verify that the services are running correctly."),(0,n.kt)("h2",{id:"update-services"},"Update Services"),(0,n.kt)("p",null,"To update the services, you can run the update script with:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"./bin/upgrade.sh <your domain>\n")))}p.isMDXComponent=!0},8588:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/images/dns_records-e124324d7326b6980d9dee51f362cd84.png"}}]);